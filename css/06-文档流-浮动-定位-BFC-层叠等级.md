
# 文档流、浮动、BFC
## 目录
* [文档流](#文档流)
* [浮动](#浮动)
* [清除浮动的方法](#清除浮动的方法)
* [定位](#定位)
* [BFC](#BFC)
* [高度塌陷](#高度塌陷)
* [层叠上下文](#层叠上下文)
***

## 文档流
* 页面中的所有的元素默认都是处在文档流当中的
* 在文档流当中的元素有如下特点：
  * 块元素：
    * 在文档流中按照从上到下的顺序排列
    * 在文档流中宽度默认会撑满父元素
    * 在文档流中高度默认被子元素撑开
  * 内联元素：
    * 在文档流中按照自左向右的顺序排列
    * 如果一行不足以放下所有的内联元素, 则会换到下一行, 继续自左向右排列
    * 宽度和高度都是默认被子元素撑开的    
## 浮动
* 使用float使元素浮动
* float有两个可选值：
  * left：使元素向左浮动
  * right: 使元素向右浮动
* 浮动元素的特点
  * 当一个元素设置浮动以后, 它会完全脱离文档流, 并且会在页面提升一个层级, 
    设置浮动以后, 元素会尽量的向父元素的上方浮动, 直到遇到父元素的边框或者其他浮动元素便停止浮动
  * 遇到没有浮动的块元素, 浮动元素也会停止浮动
  * 浮动元素浮动的高度, 不会超过其前边的兄弟元素的高度
  * 文本不会被浮动元素覆盖, 它会环绕浮动元素的周围, 我们可以使用浮动图片来实现文字环绕图片的效果
  * 块元素：
    * 设置浮动以后宽度不再占父元素的100%, 而是被子元素撑开
  * 内联元素：
    * 设置浮动以后会变成块元素
## 清除浮动的方法
* 给父级设置高度(扩展性不好)
* 给父级加浮动(页面中所有元素都加浮动, margin左右自动失效(floats bad!))
* 空标签清除浮动 (IE6 最小高度 19px;(设置`font-size：0;`后, 下还有2px偏差))
* br清浮动	(不符合工作中：结构、样式、行为, 三者分离的要求, IE6、IE7不支持)
* overflow(IE6不支持)
* 伪元素after(推荐方法)
```
.clearfix:before,.clearfix:after{
	display:table;
	content:"";
	clear:both;
}
.clearfix{
	zoom:1;
}
```
## 定位
* 我们通过position属性来设置元素是否开启定位
* 可选值：
  * static
    * 默认值, 如果不设置position属性, 默认就是static
    * 当position属性设置为static时, 元素不开启定位, 并且元素会默认在文档流当中
  * relative
    * 相对定位
    * 当position属性值设置为relative时, 则开启元素的相对定位
    * 相对定位的特点：
      * 如果开启来元素的相对定位而不设置其他的偏移量的话, 元素不会发生任何变化
      * 相对定位不会改变元素的性质, 块元素相对定位以后还是块元素, 内联元素相对定位以后还是内联元素
      * 相对定位不会使元素脱离文档流
      * 相对定位元素会相对于其自身在文档流中的位置定位
      * 相对定位会使元素提升一个层级
  * absolute
    * 绝对定位
    * 当position设置为absolute时, 则开启元素的绝对定位
    * 绝对定位的特点：
      * 绝对定位的元素会完全脱离文档流
      * 绝对定位的元素如果不设置偏移量, 它会保持在原来的位置
      * 当块元素设置绝对定位以后, 它的宽度被内容撑开
        当内联元素设置绝对定位以后, 它将会变成块元素
      * 绝对定位元素会相对于离他最近的祖先定位元素定位, 
        如果所有的祖先元素都没有开启定位, 则会相对于浏览器窗口定位
        (往往我们开启一个元素的绝对定位时, 同时也会设置其父元素的相对定位)
      * 绝对定位会使元素提升一个层级
  * fixed
    * 固定定位(是一种特殊的绝对定位)
    * 固定定位和绝对定位是基本一致的, 只不过固定定位的元素永远相对于浏览器窗口定位, 
      而且它不会随浏览器窗口滚动
    * IE6不支持固定定位
* 偏移量：
  * 当position属性值是一个非static的值时, 我们可以通过四个偏移量来设置元素的位置
  * 四个值
    * top: 距离定位位置顶边距
    * right: 距离定位位置的右边距
    * bottom: 距离定位位置的下边距
    * left: 距离定位位置的左边距
  * 这四个偏移量往往不需要全都使用, 只需要使用两个就可以完成定位, 
    只需要指定任意一个垂直方向的偏移量(top、bottom)和任意一个水平方向的偏移量(left、right), 
    即可完成一个元素的定位
* 层级：
  * 当元素开启了定位以后, 我们可以通过z-index来指定元素的层级
  * 层级越高的元素约优先显示, 层级高的会盖住层级低的
  * 如果说层级一样高, 下边盖住上边的, 
    即使父元素的层级再高, 也不会盖住子元素
## BFC
  * 根据W3C的规定, 每一个元素都有一个隐含的属性--`BFC`
  * BFC(Block Formatting Context)块级格式化环境/块级格式化上下文
  * BFC：是一个独立的渲染区域，让处于 BFC 内部的元素与外部的元素相互隔离，使内外元素的定位不会相互影响。
  * BFC在网页默认是关闭, 可以通过一些属性来开启
  * 如何开启BFC：
    * 可以设置元素: `display: inline-block;`
    * 可以设置元素: `position: absolute;`
    * 设置: `overflow: hidden; //副作用最小`
    * 设置元素浮动：`float`
  * 开启BFC以后, 元素会具有如下功能：
    * 子元素的垂直外边距不会与父元素的垂直外边距重叠
    * 开启BFC的元素不会被浮动元素所覆盖
    * 开启BFC的元素可以包含浮动子元素
  * 所以我们可以通过：`overflow: hidden;`来开启父元素的bfc, 
    以使父元素可以包含浮动的子元素	
  * 但是低版本的IE不支持BFC, 所以使用以上方式不行, 
    而IE中有个Has Layout隐含属性, 它和BFC功能类似, 
    所以对于低版本的IE来说, 开启Has Layout即可
    * 开启方式：
      `zoom:1`
## 高度塌陷
* 定义：
  * 在文档流中, 父元素的高度默认是被子元素撑开, 子元素多高父元素就多高, 
    当子元素脱离文档流以后, 子元素便不能撑开父元素, 会导致父元素的高度塌陷, 
    父元素高度塌陷以后会影响到整个的页面的布局
* 解决方案：
  * w3c推荐的方案：
    * 可以在父元素最后添加一个空的div
    * 并且为这个空的div添加一个样式：`clear: both`
    * 这样父元素就会被空的div撑开
    * 缺点：
      * 这个方案会在页面中添加冗余的代码, 会给结构增加无用代码
  * 使用after伪类(推荐方式)：
    * 通过after伪类向父元素的后边添加一个空的内容
    * 然后为空的内容设置为块元素，并且清除它的浮动
    * 实际上这种方式和上边的原理是一样的, 只不过它不会为页面增加多余的代码
    * 例子：
    ```
      .clearfix:after{
        content:"";
        display:block;
        clear:both;
      }
    ```
    * 缺点：
      * 不兼容IE6了
  * 开启父元素的BFC
	  * 如上BFC
## 层叠上下文
* 元素提升为一个比较特殊的图层，在三维空间中 (z轴) 高出普通元素一等。
* 触发条件
  * 根层叠上下文(html)
  * position
  * css3属性: flex、transform、opacity、filter、will-change、 -webkit-overflow-scrolling
* 层叠等级：层叠上下文在z轴上的排序
  * 在同一层叠上下文中，层叠等级才有意义
  * z-index的优先级最高
  ![](/images/层叠等级.jpg "层叠等级")
